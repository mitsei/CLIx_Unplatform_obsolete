<!DOCTYPE html>
<html>
	<head>
	<meta http-equiv="Content-Type" content="HTML, CSS, JavaScript" charset=UTF-8>

	<script src="/modules/unplatform/report.js"></script>
	<script type="text/javascript">
		var report = new Report()
		var user_info = {};
		function getLanguages() {
			var languages = [];
			if (navigator.languages == null ) {
				return navigator.language
			};
			for (x in navigator.languages) { languages.push(navigator.languages[x]) }
			return languages.join(',')
		}
		var fingerprint = {
			user_agent : navigator.userAgent,
	        screen_size : (screen.width + 'x' + screen.height),
	        browser_url : window.location.href,
			languages : getLanguages()
		};
		report.submitData('/api/fingerprints/', fingerprint)

		var teacher = function() {
			user_info['user_type'] = 'teacher';
			user_info['user_count'] = null;
			toggle_count('inline')
			// document.getElementById('next').style.display='block';
		}
		var student = function(){
			user_info['user_type'] = 'student';
			toggle_count('inline')
		}

		var toggle_count = function(property) {
			var buttons = document.getElementsByClassName("count")
			document.getElementById('next').style.display='none';
			for (var i=0;i<buttons.length;i++) {
				buttons[i].style.display=property;
			};
		}

		var count = function(count) {
			user_info['user_count'] = count;
			document.getElementById('next').style.display='block';
		}

		var visitor = function() {
			user_info['user_type'] = 'visitor';
			user_info['user_count'] = null;
			toggle_count('inline')
			// document.getElementById('next').style.display='block';
		}

		var demo = function() {
			user_info['user_type'] = 'demo';
			user_info['user_count'] = null;
			toggle_count('none')
			document.getElementById('next').style.display='block';
		}

		var next = function(user_info) {
			report.submitData('/api/users/', user_info)
			window.location.href='/subject/'	
		}

	</script>


    </head>

    <body>
        <header>
        </header>
<div style="margin: auto;">
<h1> User Survey </h1>
<center>
Before you access your course content, please indicate who is at the computer.
<br>
Who you are:
<button type="button" onclick="teacher()">Teacher</button>
<button type="button" onclick="student()">Student</button>
<button type="button" onclick="visitor()">Visitor/Other</button>
<button type="button" onclick="demo()">Class Demonstration</button>

<br><br>
<div class="count" style="display: none">Number of users at this computer: </div>
<button type="button" class="count" style="display: none" onclick="count('1')">1</button>
<button type="button" class="count" style="display: none" onclick="count('2')"> 2 </button>
<button type="button" class="count" style="display: none" onclick="count('3')"> 3 </button>
<button type="button" class="count" style="display: none" onclick="count('3+')"> 3+ </button>

<br><br><br>
<button type="button" id="next" style="display: none" onclick="next(user_info)"> Next </button>
</center>
</div>
    </body>
</html>